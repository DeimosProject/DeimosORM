source src1
{
        type                    = mysql

        # some straightforward parameters for SQL source types
        sql_host                = localhost
        sql_user                = root
        sql_pass                = 
        sql_db                  = auto_dev
        sql_port                = 3306  # optional, default is 3306

        #
        sql_query_pre           = SET NAMES utf8
        # sql_query_pre         = SET SESSION query_cache_type=OFF

        sql_query               = SELECT * FROM events WHERE ison=1

		sql_attr_uint         	 = id
		sql_attr_uint         	 = brand_id
		sql_field_string         = title
		sql_field_string         = img
        sql_field_string         = txt

        sql_ranged_throttle     = 0
}

source src2
{
        type                    = mysql

        # some straightforward parameters for SQL source types
        sql_host                = localhost
        sql_user                = root
        sql_pass                = 
        sql_db                  = auto_dev
        sql_port                = 3306  # optional, default is 3306

        #
        sql_query_pre           = SET NAMES utf8
        # sql_query_pre         = SET SESSION query_cache_type=OFF

        sql_query               = SELECT * FROM brands WHERE ison=1

		sql_attr_uint         	 = id
		sql_field_string         = title
		sql_field_string         = comment
		sql_field_string         = grouptitle
		sql_field_string         = groupweb
		sql_field_string         = newsletter_email
		sql_field_string         = newsletter_login
		sql_field_string         = web
		sql_field_string         = fb
		sql_field_string         = instagram
		sql_field_string         = twitter
		sql_field_string         = youtube
		sql_field_string         = tumblr
		sql_field_string         = vimeo
		sql_field_string         = flickr
		sql_field_string         = pinteres
		sql_field_string         = google
		sql_field_string         = app
		sql_field_string         = vk
		sql_field_string         = linkedIn
		sql_field_string         = IMGUR
		sql_field_string         = motoroso
		sql_field_string         = vine
		sql_field_string         = weibo
		sql_field_string         = amazon
		sql_field_string         = ebay

        sql_ranged_throttle     = 0
}


source src1throttled : src1
{
        sql_ranged_throttle     = 100
}

#############################################################################
## index definition
#############################################################################

index events
{
        source                  = src1

        path                    = C:/sphinx/data/events

        docinfo                 = extern

        dict                    = keywords

        mlock                   = 0

        morphology              = none

        min_word_len            = 1

        html_strip              = 0
}

index brands
{
        source                  = src2

        path                    = C:/sphinx/data/brands

        docinfo                 = extern

        dict                    = keywords

        mlock                   = 0

        morphology              = none

        min_word_len            = 1

        html_strip              = 0
}

#############################################################################
## indexer settings
#############################################################################

indexer
{
        mem_limit               = 128M
}

#############################################################################
## searchd settings
#############################################################################

searchd
{
        listen                  = 9312
        listen                  = 9306:mysql41

        log                     = C:/sphinx/logs/searchd.log

        query_log               = C:/sphinx/logs/query.log

        read_timeout            = 5

        client_timeout          = 300

        max_children            = 30

        persistent_connections_limit    = 30

        pid_file                = C:/sphinx/searchd.pid

        seamless_rotate         = 1

        preopen_indexes         = 1

        unlink_old              = 1

        mva_updates_pool        = 1M

        max_packet_size         = 8M

        max_filters             = 256

        max_filter_values       = 4096

        max_batch_queries       = 32

        workers                 = threads # for RT to work

}